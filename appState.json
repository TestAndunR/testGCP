{"EDITOR_STATE":{"allProjectFiles":{"c7b151fd-3466-4a58-b4b5-85ab0e8dabea":{"id":"c7b151fd-3466-4a58-b4b5-85ab0e8dabea","parent":null,"name":"testGCP","type":"DIRECTORY","isDirectory":true,"children":["b525eb5c-ae70-4b0c-9ce4-62027c4df858","37cdb6e4-dda4-44b3-b8ee-ce26dca881c0"],"isRemovable":false,"filePath":"testGCP"},"b525eb5c-ae70-4b0c-9ce4-62027c4df858":{"id":"b525eb5c-ae70-4b0c-9ce4-62027c4df858","parent":"c7b151fd-3466-4a58-b4b5-85ab0e8dabea","name":"lambda.js","type":"LAMBDA_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"testGCP/lambda.js","code":"let AWS = require('aws-sdk');\nlet _auth = require('./Authorizer');\nlet google = require('googleapis').google;\nconst storage = google.storage('v1');\nexports.handler = function (event, context, callback) {\n\tstorage.objects.list({\n\t\tbucket: 'staging.testgcpsigma.appspot.com',\n\t\tmaxResults: 10,\n\t\tprefix: ''\n\t})\n\t\t.then(response => {\n\t\t\tconsole.log(response.data);           // successful response\n\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log(err, err.stack); // an error occurred\n\t\t});\n\tstorage.objects.insert({\n\t\t\"bucket\": \"staging.testgcpsigma.appspot.com\",\n\t\t\"name\": \"image\",\n\t\t\"media\": {\n\t\t\t\"body\": content\n\t\t}\n\t})\n\t\t.then(response => {\n\t\t\tconsole.log(response.data);           // successful response\n\t\t\t\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.log(err, err.stack); // an error occurred\n\t\t});\n\n\n\tcallback(null, 'Successfully executed');\n}","triggers":[],"config":{"memory":128,"timeout":60,"runtime":"nodejs8.10"},"version":18,"syncVersion":18,"testCases":{"2dcb5bfa-9744-43e8-9062-8820d3be186c":{"id":"2dcb5bfa-9744-43e8-9062-8820d3be186c","name":"Unnamed event","functionId":"b525eb5c-ae70-4b0c-9ce4-62027c4df858","event":"{\n    \"key1\": \"value1\",\n    \"key2\": \"value2\",\n    \"key3\": \"value3\"\n}"}},"references":["37cdb6e4-dda4-44b3-b8ee-ce26dca881c0"]},"37cdb6e4-dda4-44b3-b8ee-ce26dca881c0":{"id":"37cdb6e4-dda4-44b3-b8ee-ce26dca881c0","parent":"c7b151fd-3466-4a58-b4b5-85ab0e8dabea","name":"Authorizer.js","type":"JS_FILE","isDirectory":false,"children":[],"isRemovable":true,"filePath":"testGCP/Authorizer.js","code":"const google = require(\"googleapis\").google;\n\nconst key = JSON.parse(process.env.GCLOUD_SERVICE_TOKEN);\nconst jwtClient = new google.auth.JWT({\n    email: key.client_email,\n    key: key.private_key,\n    scopes: [\"https://www.googleapis.com/auth/cloud-platform\"]\n});\ngoogle.options({auth: jwtClient, project: process.env.GCLOUD_PROJECT_ID});","triggers":[],"version":null,"syncVersion":3,"references":[]}},"rootNode":"c7b151fd-3466-4a58-b4b5-85ab0e8dabea","openFiles":["b525eb5c-ae70-4b0c-9ce4-62027c4df858"],"currentFileId":"b525eb5c-ae70-4b0c-9ce4-62027c4df858","resources":{"gcsstagingtestgcpsigmaappspotcom":{"name":"gcsstagingtestgcpsigmaappspotcom","type":"storage","config":{"mode":1,"bucket":{"region":"us-east-1","name":"staging.testgcpsigma.appspot.com"}},"globallyEditable":false}},"envVariables":[{"lambdaId":"all","varKey":"SIGMA_AWS_ACC_ID","varValue":null,"shouldPersist":false,"editable":false},{"lambdaId":"all","varKey":"GCLOUD_SERVICE_TOKEN","varValue":null,"shouldPersist":false,"editable":true,"isEditable":true},{"lambdaId":"all","varKey":"GCLOUD_PROJECT_ID","varValue":null,"shouldPersist":false,"editable":true,"isEditable":true}],"packageJSON":{"dependencies":{"aws-sdk":{"name":"aws-sdk","version":"2.176.0","notRemovable":true},"slappforge-sdk-xml":{"name":"slappforge-sdk-xml","version":"0.0.4","notRemovable":false},"googleapis":{"name":"googleapis","version":"29.0.0","notRemovable":false}}},"lambdaId":"b525eb5c-ae70-4b0c-9ce4-62027c4df858","additionalFiles":[]},"PROJECT_META":{"projectName":"testGCP","projectDescription":"","projectVersion":"1.0.0","projectRegion":"us-east-1","repoName":"testGCP","repoUrl":"https://github.com/TestAndunR/testGCP","lastSave":1528346536813}}